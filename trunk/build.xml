<project default="standardBuild" basedir=".">

    <property name="src"     value="." />
    <property name="cls"     value="bin" />
    
    <target name="compile">
        <delete dir="${cls}" />
        <mkdir dir="${cls}"/>   
        <javac srcdir="${src}" destdir="${cls}" encoding="UTF-8"/>
    </target>
    
    <target name="jar">
        <manifest file="Manifest.MF">
            <attribute name="Created-By" value="astaldo"/>
            <attribute name="Main-Class" value="jd.Main"/>
        </manifest>
        <jar jarfile="JDownloader.jar" manifest="Manifest.MF">
            <fileset dir="${cls}">
                <include name = "**/*.class" />
                <exclude name = "jd/captcha/**"/>
                <exclude name = "jd/plugins/decrypt/**"/>
                <exclude name = "jd/plugins/host/**"/>
            </fileset>
            <fileset dir="." includes="img/**"/>
            <fileset dir="." includes="*.properties"/>
        </jar>
        <delete file="Manifest.MF" failonerror="false" />
        <jar jarfile="JDownloaderPlugins.jar">
            <fileset dir="${cls}">
                <include name = "jd/plugins/decrypt/**"/>
                <include name = "jd/plugins/host/**"/>
            </fileset>
            <fileset dir="." includes="META-INF/services/*"/>
        </jar>
        <jar jarfile="JAntiCaptcha.jar">
            <fileset dir="${cls}">
                <include name = "jd/captcha/**"/>
            </fileset>
        </jar>
    </target>
<!--
keytool -genkey -alias jDownloader -keystore jDownloader.keystore -storepass jDownloader -validity 720 -dname "CN=astaldo, O=gulli Community"
-->
    <target name="sign">
        <signjar jar="JDownloader.jar"         keystore="jDownloader.keystore" alias="jDownloader" storepass="jDownloader" />
        <signjar jar="JDownloaderPlugins.jar"  keystore="jDownloader.keystore" alias="jDownloader" storepass="jDownloader" />
        <signjar jar="JAntiCaptcha.jar"        keystore="jDownloader.keystore" alias="jDownloader" storepass="jDownloader" />
    </target>
    
    <target name="eclipseBuild" depends="jar,sign">            </target>
    <target name="standardBuild" depends="compile,jar,sign">   </target>
   
</project>