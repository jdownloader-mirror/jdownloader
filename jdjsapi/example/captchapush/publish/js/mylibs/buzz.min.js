var buzz={defaults:{autoplay:false,duration:5000,formats:[],loop:false,placeholder:"--",preload:"metadata",volume:80},sounds:[],el:document.createElement("audio"),sound:function(b,k){var k=k||{},f=0,j=[],d={},c=buzz.isSupported();this.load=function(){if(!c){return this}this.sound.load();return this};this.play=function(){if(!c){return this}this.sound.play();return this};this.togglePlay=function(){if(!c){return this}if(this.sound.paused){this.sound.play()}else{this.sound.pause()}return this};this.pause=function(){if(!c){return this}this.sound.pause();return this};this.isPaused=function(){if(!c){return null}return this.sound.paused};this.stop=function(){if(!c){return this}this.setTime(this.getDuration());this.sound.pause();return this};this.isEnded=function(){if(!c){return null}return this.sound.ended};this.loop=function(){if(!c){return this}this.sound.loop="loop";this.bind("ended.buzzloop",function(){this.currentTime=0;this.play()});return this};this.unloop=function(){if(!c){return this}this.sound.removeAttribute("loop");this.unbind("ended.buzzloop");return this};this.mute=function(){if(!c){return this}this.sound.muted=true;return this};this.unmute=function(){if(!c){return this}this.sound.muted=false;return this};this.toggleMute=function(){if(!c){return this}this.sound.muted=!this.sound.muted;return this};this.isMuted=function(){if(!c){return null}return this.sound.muted};this.setVolume=function(i){if(!c){return this}if(i<0){i=0}if(i>100){i=100}this.volume=i;this.sound.volume=i/100;return this},this.getVolume=function(){if(!c){return this}return this.volume};this.increaseVolume=function(i){return this.setVolume(this.volume+(i||1))};this.decreaseVolume=function(i){return this.setVolume(this.volume-(i||1))};this.setTime=function(i){if(!c){return this}this.whenReady(function(){this.sound.currentTime=i});return this};this.getTime=function(){if(!c){return null}var i=Math.round(this.sound.currentTime*100)/100;return isNaN(i)?buzz.defaults.placeholder:i};this.setPercent=function(i){if(!c){return this}return this.setTime(buzz.fromPercent(i,this.sound.duration))};this.getPercent=function(){if(!c){return null}var i=Math.round(buzz.toPercent(this.sound.currentTime,this.sound.duration));return isNaN(i)?buzz.defaults.placeholder:i};this.setSpeed=function(i){if(!c){return this}this.sound.playbackRate=i};this.getSpeed=function(){if(!c){return null}return this.sound.playbackRate};this.getDuration=function(){if(!c){return null}var i=Math.round(this.sound.duration*100)/100;return isNaN(i)?buzz.defaults.placeholder:i};this.getPlayed=function(){if(!c){return null}return g(this.sound.played)};this.getBuffered=function(){if(!c){return null}return g(this.sound.buffered)};this.getSeekable=function(){if(!c){return null}return g(this.sound.seekable)};this.getErrorCode=function(){if(c&&this.sound.error){return this.sound.error.code}return 0};this.getErrorMessage=function(){if(!c){return null}switch(this.getErrorCode()){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return null}};this.getStateCode=function(){if(!c){return null}return this.sound.readyState};this.getStateMessage=function(){if(!c){return null}switch(this.getStateCode()){case 0:return"HAVE_NOTHING";case 1:return"HAVE_METADATA";case 2:return"HAVE_CURRENT_DATA";case 3:return"HAVE_FUTURE_DATA";case 4:return"HAVE_ENOUGH_DATA";default:return null}};this.getNetworkStateCode=function(){if(!c){return null}return this.sound.networkState};this.getNetworkStateMessage=function(){if(!c){return null}switch(this.getNetworkStateCode()){case 0:return"NETWORK_EMPTY";case 1:return"NETWORK_IDLE";case 2:return"NETWORK_LOADING";case 3:return"NETWORK_NO_SOURCE";default:return null}};this.set=function(i,l){if(!c){return this}this.sound[i]=l;return this};this.get=function(i){if(!c){return null}return i?this.sound[i]:this.sound};this.bind=function(n,q){if(!c){return this}var p=this,n=n.split(" "),r=function(t){q.call(p,t)
};for(var l in n){var o=n[l],i=o;o=i.split(".")[0];j.push({idx:i,func:r});this.sound.addEventListener(o,r,true)}return this};this.unbind=function(p){if(!c){return this}var p=p.split(" ");for(var o in p){var l=p[o];type=l.split(".")[0];for(var n in j){var q=j[n].idx.split(".");if(j[n].idx==l||(q[1]&&q[1]==l.replace(".",""))){this.sound.removeEventListener(type,j[n].func,true);delete j[n]}}}return this};this.bindOnce=function(i,n){if(!c){return this}var l=this;d[f++]=false;this.bind(f+i,function(){if(!d[f]){d[f]=true;n.call(l)}l.unbind(f+i)})};this.trigger=function(r){if(!c){return this}var r=r.split(" ");for(var q in r){var l=r[q];for(var p in j){var o=j[p].idx.split(".");if(j[p].idx==l||(o[0]&&o[0]==l.replace(".",""))){var n=document.createEvent("HTMLEvents");n.initEvent(o[0],false,true);this.sound.dispatchEvent(n)}}}return this};this.fadeTo=function(r,o,q){if(!c){return this}if(o instanceof Function){q=o;o=buzz.defaults.duration}else{o=o||buzz.defaults.duration}var p=this.volume,l=o/Math.abs(p-r),n=this;this.play();function i(){setTimeout(function(){if(p<r&&n.volume<r){n.setVolume(n.volume+=1);i()}else{if(p>r&&n.volume>r){n.setVolume(n.volume-=1);i()}else{if(q instanceof Function){q.apply(n)}}}},l)}this.whenReady(function(){i()});return this};this.fadeIn=function(i,l){if(!c){return this}return this.setVolume(0).fadeTo(100,i,l)};this.fadeOut=function(i,l){if(!c){return this}return this.fadeTo(0,i,l)};this.fadeWith=function(l,i){if(!c){return this}this.fadeOut(i,function(){this.stop()});l.play().fadeIn(i);return this};this.whenReady=function(l){if(!c){return null}var i=this;if(this.sound.readyState==0){this.bind("canplay.buzzwhenready",function(){l.call(i)})}else{l.call(i)}};function g(l){var p=[],o=l.length-1;for(var n=0;n<=o;n++){p.push({start:l.start(o),end:l.end(o)})}return p}if(c){for(var e in buzz.defaults){k[e]=k[e]||buzz.defaults[e]}this.sound=document.createElement("audio");if(b instanceof Array){for(var e in b){var a=document.createElement("source");a.src=b[e];this.sound.appendChild(a)}}else{if(k.formats.length){for(var e in k.formats){var a=document.createElement("source");a.src=b+"."+k.formats[e];this.sound.appendChild(a)}}else{this.sound.src=b}}if(k.loop){this.loop()}if(k.autoplay){this.sound.autoplay="autoplay"}if(k.preload===true){this.sound.preload="auto"}else{if(k.preload===false){this.sound.preload="none"}else{this.sound.preload=k.preload}}this.setVolume(k.volume);buzz.sounds.push(this)}},group:function(a){var a=c(a,arguments);this.getSounds=function(){return a};this.add=function(f){var f=c(f,arguments);for(var d in f){for(var e in a){a.push(f[d])}}};this.remove=function(f){var f=c(f,arguments);for(var d in f){for(var e in a){if(a[e]==f[d]){delete a[e];break}}}};this.load=function(){b("load");return this};this.play=function(){b("play");return this};this.togglePlay=function(){b("togglePlay");return this};this.pause=function(d){b("pause",d);return this};this.stop=function(){b("stop");return this};this.mute=function(){b("mute");return this};this.unmute=function(){b("unmute");return this};this.toggleMute=function(){b("toggleMute");return this};this.setVolume=function(d){b("setVolume",d);return this};this.increaseVolume=function(d){b("increaseVolume",d);return this};this.decreaseVolume=function(d){b("decreaseVolume",d);return this};this.loop=function(){b("loop");return this};this.unloop=function(){b("unloop");return this};this.setTime=function(d){b("setTime",d);return this};this.setduration=function(d){b("setduration",d);return this};this.set=function(d,e){b("set",d,e);return this};this.bind=function(d,e){b("bind",d,e);return this};this.unbind=function(d){b("unbind",d);return this};this.bindOnce=function(d,e){b("bindOnce",d,e);return this};this.trigger=function(d){b("trigger",d);return this};this.fade=function(g,f,d,e){b("fade",g,f,d,e);return this};this.fadeIn=function(d,e){b("fadeIn",d,e);return this};this.fadeOut=function(d,e){b("fadeOut",d,e);return this};function b(){var d=c(null,arguments),f=d.shift();for(var e in a){a[e][f].apply(a[e],d)
}}function c(e,d){return(e instanceof Array)?e:Array.prototype.slice.call(d)}},all:function(){return new buzz.group(buzz.sounds)},isSupported:function(){return !!this.el.canPlayType},isOGGSupported:function(){return !!this.el.canPlayType&&this.el.canPlayType('audio/ogg; codecs="vorbis"')},isWAVSupported:function(){return !!this.el.canPlayType&&this.el.canPlayType('audio/wav; codecs="1"')},isMP3Supported:function(){return !!this.el.canPlayType&&this.el.canPlayType("audio/mpeg;")},isAACSupported:function(){return !!this.el.canPlayType&&(this.el.canPlayType("audio/x-m4a;")||this.el.canPlayType("audio/aac;"))},toTimer:function(b,a){h=Math.floor(b/3600);h=isNaN(h)?"--":(h>=10)?h:"0"+h;m=a?Math.floor(b/60%60):Math.floor(b/60);m=isNaN(m)?"--":(m>=10)?m:"0"+m;s=Math.floor(b%60);s=isNaN(s)?"--":(s>=10)?s:"0"+s;return a?h+":"+m+":"+s:m+":"+s},fromTimer:function(b){var a=b.toString().split(":");if(a&&a.length==3){b=(parseInt(a[0])*3600)+(parseInt(a[1])*60)+parseInt(a[2])}if(a&&a.length==2){b=(parseInt(a[0])*60)+parseInt(a[1])}return b},toPercent:function(d,c,a){var b=Math.pow(10,a||0);return Math.round(((d*100)/c)*b)/b},fromPercent:function(d,c,a){var b=Math.pow(10,a||0);return Math.round(((c/100)*d)*b)/b}};